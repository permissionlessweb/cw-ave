# AV Events

## TODO
- purchasing tickets: implement escrow logic
- event segments: improve implementation for presale and escrow handling
- events: implement fully private events (black hole tech)
- resale orderbook: ask-less orderbook 
- homie checkin: set password for homie to check in on behalf of you.


Av Events are disposiable (single use) smart contract, for coordination of IRL event ticket sales and use. In this repo there are two contracts:

- cw-ave
- cw-ave-factory

## Creating New Event 
A new event is created by calling the cw-ave-factory contract with all the parameters desired. To create an event you will need to define the following 

| Field Name | Type | Description |
| --- | --- | --- |
| `event_curator` | `Option<String>` | The curator of the event. Defaults to the sender if not set. |
| `title` | `String` | The title or label for the contract and frontend. |
| `description` | `String` | A description of the event for recordkeeping purposes. |
| `usher_admins` | `Vec<Member>` | A list of admin keys authorized to manually modify the event attendee contract. |
| `guest_details` | `Vec<GuestDetails>` | Details about the guests. |
| `cw420` | `u64` | The code-id of the cw420 contract. |
| `event_timeline` | `Vec<EventSegments>` | A timeline of the event stages. |

### Event Ushers (Admins)
Events have ushers, and these are accounts that are authorized to update a guest attendance status. An event curator defines a list of addresses and their weights, which will grant access to the event usher tooling, which powers checking in guests to an event.

### Guest Details
An event can define various types of guests that will be present at an event. From attendees, to vendors, to artist, to volunteers. These are set when creating the event

| `GuestDetails` | Type | Description |
| --- | --- | --- |
| `guest_type` | `String` | Human readable label of this guest type |
| `guest_weight` | `u64` | unique numeric value for this 3. |
| `max_ticket_limit` | `u32` | the limit to how many tickets this guest type can purchase. Set to 0 to disable|
| `ticket_cost` | `Vec<Coin>` | A list of assets accepted to purchase 1 ticket |
 

### Event Stages
An event may span throughout multiple days, or have different segments dedicated to specific event stages. To implement the escrow of ticket sales

| `EventSegments` | Type | Description |
| --- | --- | --- |
| `stage_description` | `String` | Human readable label of this event stage |
| `start` | `Timestamp` | when this event stage starts |
| `end` | `Timestamp` | when this event stage ends. |
 

## Purchasing Tickets
## Refunding Tickets
 
## Checking Into Event
In order for a guest to check in, an ADR-036 offline signature must be generated by the wallet a guest has set to hold this events ticket. The data being signed includes:

- the event contract address
- the usher address checking in the guest
- the stage of event being checked into

| `CheckInDetails` | Type | Description |
| --- | --- | --- |
| `signature` | `Binary` | Human readable label of this event stage |
| `ticket_addr` | `String` | address registerd to use for guest ticket |
| `pubkey` | `Binary` | Base64 encoded binary of the pubkey, via `gogoproto.Any` |
 

This prevents the guests ticket from being consumed, without their consent.


## Infrastructure Cost Estimates (initial + 1 year) (70K - 150K)

### Smart Contracts 
costs: 
- initial development: 30K
- external audits: 5K - 30K

### Front End & Indexer
- initial development: 30 - 60K 
- hosting: 2.5 - 5K per year **
- akash deployment cost: dynamic based on event timeline (ticket presale, etc) 

### Eigenlayer AVS
- off-chain payment verification infrastructre:
    - ETH L1 settlement gas fees: per event basis (1-10k)

## Governance 
Explore investor DAO structure: https://docs.daodao.zone/


## LICENSE FEE 

| Chain | Fee | Destination |
| --- | --- | --- |
| `event_curator` | `Option<String>` | The curator of the event. Defaults to the sender if not set. |
| `title` | `String` | The title or label for the contract and frontend. |
| `description` | `String` | A description of the event for recordkeeping purposes. |
| `usher_admins` | `Vec<Member>` | A list of admin keys authorized to manually modify the event attendee contract. |
| `guest_details` | `Vec<GuestDetails>` | Details about the guests. |
| `cw420` | `u64` | The code-id of the cw420 contract. |
| `event_timeline` | `Vec<EventSegments>` | A timeline of the event stages. |